<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Finishing up programming, and projects</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/assets/base.css">
        <link rel="stylesheet" href="/assets/syntax.css">

        <!-- Custom CSS -->
        <!-- <link rel="stylesheet" href="/assets/main.css"> -->

        <script src="/assets/d3.v3.min.js" charset="utf-8"></script>
        <script src="/assets/topojson.v1.min.js" charset="utf-8"></script>
        <script src="/assets/queue.v1.min.js" charset="utf-8"></script>
    </head>
    <body>
        <div class="main">

            <header>
  <a href="/">NYU — Spring 2015</a> / <span>Week 5</span>
</header>

<h1>Finishing up programming, and projects</h1>

<div class="lesson">
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.2.min.js"></script>

<p>We&rsquo;ll finish what we started in the same groups we started them in, all while doing some projects chats in the background.</p>

<h2>Housekeeping</h2>

<p>Questions?</p>

<h2>Basic HTML and CSS</h2>

<p>Recall the list of things we wanted to accomplish when we started out this task. From last week:</p>

<ul>
<li>Probably the assets.</li>
<li>Probably the data for maximum daily dose by drug.</li>
<li>Probably how to make a list/grid of things.</li>
<li>Probably a way to store data in Javascript (we&rsquo;ve done this before)</li>
<li>Probably a way to &ldquo;do stuff when you click things&rdquo;. One popular library non-experts do this is with <a href="http://jquery.com/">jQuery</a>.</li>
<li>Probably a way to do basic math in a web browser. (JavaScript seems like a good idea.)</li>
</ul>

<p>Below are some snippets that could be helpful to you. We&rsquo;ll go over these together. Feel free to use the starter file Amanda provided last week to follow along.</p>

<h1>jQuery tips</h1>

<p><a href="https://jquery.com/">jQuery</a> is a common library developers load to &ldquo;do stuff&rdquo; in Javascript. It&rsquo;s helpful because it performs reliably in internet explorer 6 and Safari on your iPhone 6. To load it, paste this code snippet in your html file:</p>
<div class="highlight"><pre><code class="language-html" data-lang="html">  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://code.jquery.com/jquery-1.11.2.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div>
<p>When it&rsquo;s loaded, you should be able to use it with the <code>$</code>, which is just shorthand for typing <code>jQuery</code>. An easy way to find out if it loaded correctly is simply to type <code>jQuery</code> in your Javascript console. If it returns something (even if you don&rsquo;t understand it), it loaded! You can do this on almost any web page.</p>

<h3>Detecting when you click something</h3>

<p>These kinds of things are called <a href="http://api.jquery.com/category/events/">events</a>, so you might want to look for a &ldquo;click&rdquo; event. here&rsquo;s the <a href="http://api.jquery.com/click/">documentation page</a> for that, which is full of great examples.</p>

<p>In our case, many of you put the values for your dosages as <code>data-attributes</code> of your divs. So one kind of product could look like this:</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;dose tylenol&quot;</span> <span class="na">data-dosage=</span><span class="s">&quot;3000&quot;</span><span class="nt">&gt;</span>

<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<p>jQuery targets things with CSS selectors, so if you want to do something any time you click on a div of the class <code>dose</code>, you would do something like this in your javascript tags (more on jQuery data attribution is <a href="http://api.jquery.com/data/">here</a>:</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>

<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.dose&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>



  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;event is:&quot;</span><span class="p">,</span> <span class="nx">evt</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;dose is&quot;</span><span class="p">,</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;dosage&quot;</span><span class="p">);</span>

<span class="p">});</span>

<span class="nt">&lt;/script&gt;</span>
</code></pre></div>
<p>The <code>this</code> is frankly a little abstract.</p>

<h3>Doing math on strings</h3>

<p>Data types are always annoying – numbers and words and dates are different to your browser, and we need to knwo what we&rsquo;re working with. In your console, type</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="s2">&quot;3000&quot;</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">;</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="p">);</span>
</code></pre></div>
<p>This is a problem that has been <a href="https://www.google.com/search?q=javascript+turning+a+string+into+a+number&amp;oq=javascript+turning+a+string+into+a+number&amp;aqs=chrome..69i57j69i65l2j0l2j69i60.5205j0j7&amp;sourceid=chrome&amp;es_sm=119&amp;ie=UTF-8">Googled before</a>.</p>

<h3>Having and updating variables</h3>

<p>To have a calculator of any kind, you need to be able to keep track of a few numbers. Variables can help!</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>

<span class="c1">//I start with zero.</span>
<span class="kd">var</span> <span class="nx">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.dose&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>


  <span class="c1">//how much is in the dose I jut clicked (number, please, not string)?</span>
  <span class="kd">var</span> <span class="nx">thisDose</span> <span class="o">=</span> <span class="o">+</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;dosage&quot;</span><span class="p">);</span>

  <span class="c1">//my total is equal to the previous total plus what I just clicked</span>
  <span class="nx">total</span> <span class="o">=</span> <span class="nx">thisDose</span> <span class="o">+</span> <span class="nx">total</span><span class="p">;</span>

<span class="p">});</span>

<span class="nt">&lt;/script&gt;</span>
</code></pre></div>
<h3>Selection and de-selection</h3>

<p>Any button you want to click, you want to be able to un-click. That&rsquo;s an issue of <em>state</em> and of <em>presentation</em> – recognizing the state your button is in and displaying it to reflect that state.</p>

<p>An easy to do this is by adding a CSS class to the div when it is selected. </p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>

  <span class="c">/* this applies to all .dose divs*/</span>
  <span class="nc">.dose</span> <span class="p">{</span>
    <span class="k">width</span><span class="o">:</span> <span class="m">100px</span><span class="p">;</span>
    <span class="k">height</span><span class="o">:</span> <span class="m">100px</span><span class="p">;</span>
    <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span>
    <span class="k">background-color</span><span class="o">:</span> <span class="m">#f0f0f0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c">/* this applies to divs classed dose AND selected-dose */</span>
  <span class="nc">.dose.selected-dose</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="o">:</span> <span class="nb">red</span><span class="p">;</span>
  <span class="p">}</span>

<span class="nt">&lt;/style&gt;</span>
</code></pre></div>
<h3>Detecting classes</h3>

<p>Of course, you need to know whether something is selected when you&rsquo;re doing math – are you adding to the total or subtracting from it? Here&rsquo;s what Googling &ldquo;Detecting classes in jQuery&rdquo; <a href="https://www.google.com/search?q=detecting+classes+in+jquery&amp;oq=detecting+classes+in+jquery&amp;aqs=chrome..69i57.3390j0j7&amp;sourceid=chrome&amp;es_sm=119&amp;ie=UTF-8">got me</a>. The <code>hasClass</code> function in particular seems helpful. Here are <a href="https://api.jquery.com/hasclass/">the docs</a> for that.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>

<span class="c1">//I start with zero.</span>
<span class="kd">var</span> <span class="nx">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.dose&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

  <span class="c1">//how much is in the dose I jut clicked (number, please, not string)?</span>
  <span class="kd">var</span> <span class="nx">thisDose</span> <span class="o">=</span> <span class="o">+</span><span class="nx">button</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s2">&quot;dosage&quot;</span><span class="p">);</span>

  <span class="c1">// is this already selected?</span>
  <span class="kd">var</span> <span class="nx">isAlreadySelected</span> <span class="o">=</span> <span class="nx">button</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;selected-dose&quot;</span><span class="p">);</span>

  <span class="c1">//if so, unselect it and remove its dosage from my total.</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isAlreadySelected</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;selected-dose&quot;</span><span class="p">);</span>
    <span class="nx">total</span> <span class="o">=</span> <span class="nx">total</span> <span class="o">-</span> <span class="nx">thisDose</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">//if not, select it and add its dosage from my total.</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isAlreadySelected</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;selected-dose&quot;</span><span class="p">);</span>
    <span class="nx">total</span> <span class="o">=</span> <span class="nx">total</span> <span class="o">+</span> <span class="nx">thisDose</span><span class="p">;</span>
  <span class="p">}</span>



<span class="p">});</span>

<span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div>
<h3>Writing stuff on a page</h3>

<p>It&rsquo;s cool to see stuff show up on the page based on code you wrote. Here, an empty div with the class <code>current-total-dose-display</code> gets filled with the word &ldquo;Moo&rdquo;:</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;current-total-dose-display&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>

<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
  <span class="c1">//you can probably adopt this to your app easily.</span>
  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.current-total-dose-display&quot;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Moo&quot;</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div>
<h3>Putting it all together</h3>

<p>Here&rsquo;s a <a href="demo.html">basic demo</a> of all these concepts.</p>

</div>


        </div> <!-- /main -->

        <script src="/assets/base.js" charset="utf-8"></script>

    </body>
</html>
